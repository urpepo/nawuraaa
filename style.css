/* ===============================
   Birthday Pages â€” Global Styles
   Works for: index.html, ucapan.html, gift.html
   iPhone-friendly (safe areas, playsinline video, reduced-motion)
   =============================== */

:root{
  --pink: #f6c2d1;
  --pink-dark: #eaa4b9;
  --ink: #171717;
  --white: #ffffff;
  --glass: rgba(255,255,255,.10);
}

/* Reset-lite */
*{box-sizing: border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: Poppins, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--white);
  background: #0b0b0b;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Safe areas + full-height for iPhone */
.center, .wrap{
  min-height: 100vh;     /* fallback */
  min-height: 100svh;    /* iOS 15+ */
  min-height: 100dvh;    /* modern */
  padding-left: max(16px, env(safe-area-inset-left));
  padding-right: max(16px, env(safe-area-inset-right));
  padding-top: max(24px, env(safe-area-inset-top));
  padding-bottom: max(24px, env(safe-area-inset-bottom));
}

/* Background video + overlay (index) */
#bgVideo{ position:fixed; inset:0; width:100%; height:100%; object-fit:cover; filter:brightness(.9) saturate(1.05); z-index:0 }
.overlay{ position:fixed; inset:0; background: radial-gradient(120% 120% at 50% 10%, rgba(0,0,0,.1), rgba(0,0,0,.55)), linear-gradient(180deg, rgba(0,0,0,.15), rgba(0,0,0,.6)); z-index:1; pointer-events:none }

/* Main layout */
.center{ position:relative; z-index:2; display:grid; place-items:center; text-align:center }
.wrap{ display:grid; place-items:center }
.stage{ position:relative; display:grid; gap:18px; place-items:center; text-align:center }

/* Card/Glass */
.card, .voucher{
  background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.06));
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 16px;
  padding: 16px 14px;
  box-shadow: 0 20px 60px rgba(246,194,209,.15), inset 0 1px 0 rgba(255,255,255,.15);
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
}

/* Typography */
.title{ font-family: "Dancing Script", cursive; font-size: clamp(34px,7vw,76px); margin:0; text-shadow: 0 6px 24px rgba(0,0,0,.35) }
.subtitle{ opacity:.9; margin:0 0 6px; font-size: clamp(14px,2.7vw,18px) }

/* Typewriter */
.typer{ display:inline }
.blink{ border-right:2px solid rgba(255,255,255,.75); padding-right:4px; white-space:nowrap; overflow:hidden; animation: blink 1s step-end infinite }
.caret{ display:inline-block; width:2px; height:1em; background:#fff; margin-left:2px; vertical-align:-2px; animation: blink 1s step-end infinite }
@keyframes blink{ 50%{ opacity:0 } }

/* Buttons */
.btn{ appearance:none; border:none; border-radius:14px; padding:.9rem 1.25rem; font-weight:700; cursor:pointer; color:#4b0a1b; background:var(--pink); box-shadow:0 10px 30px rgba(246,194,209,.35); transform:translateY(0); transition: transform .15s ease, filter .2s ease }
.btn:hover{ transform:translateY(-2px) }
.btn:active{ transform:translateY(0) }
.btn[disabled]{ opacity:.6; filter:grayscale(.2); pointer-events:none }
.btn.ghost{ background:transparent; color:#fff; border:1px solid rgba(255,255,255,.35) }

/* Tap-feel on iOS */
.btn, .gift{ -webkit-tap-highlight-color: transparent; touch-action: manipulation }

/* Floating petals (index) */
.petal{ position:fixed; top:-10vh; will-change: transform; pointer-events:none; z-index:2 }
@keyframes fall{ to{ transform: translate(var(--x,0), 110vh) rotate(1turn) } }

/* Sparkles (ucapan) */
.sparkle{ position:absolute; border-radius:50%; background:rgba(255,255,255,.6); filter:blur(.5px); animation: floatUp linear infinite; pointer-events:none }
@keyframes floatUp{ from{ transform:translateY(0) } to{ transform:translateY(-120px) } }

/* Fade helpers */
.fade-out{ opacity:0; transition: opacity .9s ease }

/* Confetti canvas */
#confetti{ position:fixed; inset:0; z-index:10; pointer-events:none }

/* Gift box (gift.html) */
.gift{ position:relative; width:min(280px,72vw); height:min(230px,58vw); cursor:pointer; user-select:none }
.box{ position:absolute; inset:auto 0 0 0; height:66%; border-radius:12px; background: linear-gradient(180deg,#ff9ec0,#ff7aa7); box-shadow:0 18px 50px rgba(246,194,209,.25) }
.box:before{ content:""; position:absolute; left:50%; top:0; bottom:0; width:22px; background:rgba(255,255,255,.6); transform:translateX(-50%) }
.lid{ position:absolute; left:50%; bottom:66%; transform:translateX(-50%); width:110%; height:22%; background: linear-gradient(180deg,#ffb3cc,#ff8db8); border-radius:14px; transform-origin:bottom center; box-shadow:0 14px 40px rgba(246,194,209,.25) }
.lid:before{ content:""; position:absolute; left:50%; top:0; bottom:0; width:24px; background:rgba(255,255,255,.7); transform:translateX(-50%) }
.bow{ position:absolute; left:50%; bottom:70%; transform:translateX(-50%); width:70px; height:50px }
.loop{ position:absolute; width:34px; height:34px; border:10px solid #ffd7e5; border-radius:50% }
.loop.left{ right:50%; transform:translateX(-6px) rotate(15deg) }
.loop.right{ left:50%; transform:translateX(6px) rotate(-15deg) }

/* Wiggle hint */
.gift:hover{ animation: shake .6s ease-in-out infinite }
@keyframes shake{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-2px) } }

/* Open / explode */
.open .lid{ animation: flip 760ms ease forwards }
@keyframes flip{ 0%{ transform:translateX(-50%) rotate(0) } 60%{ transform:translateX(-50%) rotate(-85deg) } 100%{ transform:translateX(-50%) rotate(-92deg); opacity:.95 } }
.open .box{ animation: bounce 680ms ease }
@keyframes bounce{ 0%{ transform:translateY(0) } 45%{ transform:translateY(6px) } 100%{ transform:translateY(0) } }
.explode{ animation: kaboom .68s ease forwards }
@keyframes kaboom{ 0%{ opacity:1; transform:scale(1) } 100%{ opacity:0; transform:scale(1.15) } }

/* Reveal content */
.reveal{ display:none; opacity:0; transform:translateY(18px) scale(.985); transition: opacity .55s ease, transform .55s ease }
.show{ display:block; opacity:1; transform:translateY(0) scale(1) }

/* Voucher bits */
.voucher .heading{ font-size:clamp(16px,3.4vw,20px); margin:.2rem 0 .1rem }
.code{ display:flex; flex-wrap:wrap; align-items:center; gap:10px; background:rgba(0,0,0,.35); border:1px dashed rgba(255,255,255,.35); padding:10px 12px; border-radius:12px }
.code kbd{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; font-size:16px; letter-spacing:.8px }
.actions{ display:flex; gap:10px; justify-content:center; margin-top:8px }

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce){
  #bgVideo{ display:none }
  .overlay{ background: linear-gradient(180deg,#f2bfd0,#f7dbe4) }
  .petal, .sparkle{ display:none !important }
  .gift:hover{ animation:none }
  .open .lid, .open .box, .explode{ animation: none }
}

/* Small screens tweaks */
@media (max-width: 520px){
  .title{ font-size: clamp(30px, 10vw, 56px) }
  .btn{ padding:.85rem 1.05rem }
}
